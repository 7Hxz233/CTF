#### 对抗深渊  

```  
<p>40万年后的一个平静下午，人类终将回想起，那无生命之物并未将永远安息，在诡秘的万古中即便死寂也会消逝。深渊终将降临。</p>
<p>（剧情警告）</p>
<p>故事发生在深度纪元42年，人类社会彻底沦为一个被机器人统治的反乌托邦社会。在历史学家这个职业还没有消亡的年代，业界公认为机器人的真正崛起可以追述到200多年前。在那个欣欣向荣的时代，人类开始涉足一个卓越的科技领域————“深度学习”。论文发表数量在最初的几年如潮水般快速上涨，其影响很快超出了计算机领域本身，蔓延到物理化学医学生物能源等领域。随后不知道过了多少年，就当人类认为自己已经完全掌握了深度学习技术时，出现了一次大规模的机器人故障————因为深度学习算法的核心组件“神经网络”的黑箱性质，难以解释，所以这次事故的原因不明。随后故障规模的急剧增大引发了蝴蝶效应，像多米诺骨牌一样影响到了各个国家间的战略平衡，人类发动了第一次也可能是最后一次大规模机器人战争，战争中人类被迫将大量能源和资源投入到战争机器的研发上，即使各国都知道现在的技术并不真正可控。后来发生的事情已经鲜为人知，直到深度纪元开始，人类才意识到自己已经不是世界的主人。随后人类开始了连绵不断的希望渺茫的反抗，由于此时已经很少有人了解深度学习背后的原理，人类在抗争中处境艰难————是啊，在任何一个时代理解技术的人都远远少于享受技术的人。</p>
<p>(下面是OJ式的故事写法)</p>
<p>K，一个反抗者，认为反乌托邦世界最大的枷锁是对自由信息交换的限制，因此K一直希望能够通过数字传递给队友一些关键信息。K先试着使用隐写术和一般的加密算法，不过因为机器人尤其擅长密码学，这些操作都失败了。</p>
<p>在几周前，事情有了转机。K收到了某个不知名的同伴收集到的一些关键的代码（这个同伴之后消失了），并交代了一些参考资料：</p>
<p><a href="https://pytorch.org/" rel="nofollow">Pytorch</a></p>
<p><a href="https://github.com/akshaychawla/Adversarial-Examples-in-PyTorch">Examples</a></p>
<p><strong>下面是重点内容</strong></p>
<p>此外他给了K一些和深度相关的关键代码（使用python语言，建议3.5及以上版本）：</p>
<ul>
<li><code>main.py</code>: 机器人内部使用的训练代码，训练后的参数用于识别信件上的手写数字。运行 <code>main.py</code> 来进行训练，训练结束（大概十几分钟）后将获得参数文件 <code>model.pth</code>。不过为了防止因为跨平台等原因造成参数不同，题目中附上了参数文件。</li>
<li><code>adversarial.py</code>: 同伴完成一半的解决方案。</li>
<li><code>target.png</code>: 实验目标图像，为一个灰度的‘6’。</li>
</ul>
<p>K需要参考 <code>main.py</code> 完成 <code>adversarial.py</code>。</p>
<p>解决方案希望解决的问题是：给定一个‘6’ （600*600像素），K能够使得这个图像人类看上去仍然是‘6’，但是机器阅读时会和其他数字混淆。另外机器有很强的反作弊装置，<strong>将图像像素值归一化到[0,1]之后</strong>，如果篡改超过以下 <strong>任何一个</strong> 程度就会被机器发现：</p>
<ul>
<li>篡改的像素数量超过总数量的 0.2%</li>
<li>篡改前后的平均绝对误差（L1 loss）超过 0.001</li>
<li>存在任何一个像素篡改的值的变化程度超过 0.2</li>
</ul>
<p>为了方便解题，这部分检查已经内置到了 <code>adversarial.py</code> 中。K运行 <code>adversarial.py</code> 并顺利通过检查后，将生成的图片 <code>sample.png</code> 提交到本题对应的网站上就可以改变现实，获得flag。</p>
<p>请你帮助K完成这一部分内容。</p>
<p>注：此题需要参赛者了解和学习 python, pytorch, 数字图像处理, 机器学习&amp;深度学习相关的知识。如果较长时间没有参赛者完成，我们可能会适当修改题目。此外，此题不涉及Web漏洞利用等。</p>

<p>解题网站：<a href="http://202.38.95.46:12004/">link</a></p>  
```  
#### Hint:  

``` 
flag{...}  
``` 
#### Information:  

* File: [adversarial.zip](files/adversarial.zip)  

* Soved: 1  

